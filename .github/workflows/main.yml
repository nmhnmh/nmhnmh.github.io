name: build and deploy to github pages

on:
  push:
    branches:
      - source

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: checkout the site source
        uses: actions/checkout@v1

      - name: build the site
        # github actios will set the WORKDIR at runtime, no need to map the volumns manually
        uses: docker://nmhnmh/sitekicker:latest

      - name: deploy to github pages
        # this is a user site, so we need to deploy to master branch
        run: |
          git --version
